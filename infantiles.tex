%! Author = Ruslan López
%! Date = 19/08/2025

% Preamble
\input{comandosAcordes}
\documentclass[12pt, spanish]{book}

% Packages
\usepackage[T1]{fontenc} %pdflatex
%\usepackage{fontspec} %xelatex
\usepackage[utf8]{inputenc}
\usepackage{babel}
\usepackage{mypiano}
\usepackage{gchords}
\usepackage{latexsym,fancyhdr}
\usepackage{imakeidx}
\usepackage[pdfpagelabels,hyperindex,unicode=true,pdfusetitle, bookmarks=true,bookmarksnumbered=false,bookmarksopen=true,
    breaklinks=false,pdfborder={0 0 1},backref=false,colorlinks=true]{hyperref}
\usepackage[chordbk]{songbook} %% Words & Chords edition. Estribillero Musicos
\usepackage{endnotes}
%\usepackage{biblatex}
\usepackage{tikz}
%%\usepackage[compactallsongs,chordbk]{songbook}    %% Words & Chords edition.
%\usepackage[wordbk]{songbook}                 %% Words Only edition. Estribillero publicable
%\usepackage[overhead]{songbook}               %% Overhead Transparency edition. Estribillero Letras

%\newcommand\themarker[1]{\pdfbookmark[1]{#1}{\pdfmdfivesum{#1}}}


% Paso 1: Guardar el entorno original
\let\oldsong\song
\let\endoldsong\endsong


\newcommand{\strconcat}[2]{#1 - #2}

% Paso 2: Redefinir el entorno para insertar el pdfbookmark
%\renewenvironment{song}[7][YF]{%
\RenewDocumentEnvironment{song}{m m m m m m}{%
    \pdfbookmark[1]{\strconcat{#1}{#4}}{\pdfmdfivesum{\strconcat{#1}{#4}}}% usar el primer argumento como título
    \oldsong{#1}{#2}{#3}{#4}{#5}{#6}% llamar al entorno original con los mismos argumentos
    }{%
    \endoldsong
}
\renewcommand*{\UrlFont}{\ttfamily\smaller\relax}

\renewcommand{\SBChorusTag}{Coro:}
\renewcommand{\SBBridgeTag}{Puente:}
\renewcommand{\SBEndTag}{Fin:}
%\newcommand{\myTitleFont}{\Huge\myHugeSF}
\newcommand{\mySubTitleFont}{\large\sf}


%%%
% Turn on/off index-file generation.  Uncomment the \makeindex line to
% turn index generation on;  comment it out to turn index generation
% off.
%%%
\makeTitleIndex         %% Title and First Line Index.
\makeTitleContents      %% Table of Contents.
\makeKeyIndex           %% Index of song by key.
\makeArtistIndex        %% Index of song by artist.
\makeindex

\renewcommand{\notesname}{Notas}

%%%
% Revision Date and Release Date definitions.
%
%       \RelDate - The last time this songbook was released.  Set this
%                  date each time a new release/update of the songbook
%                  is generated.
%       \RevDate - The last time a particular song was revised in any
%                  way.  This command will be renewed inside every
%                  song.
%%%
\newcommand{\RelDate}{\today}
\newcommand{\RevDate}{\today}

%%%
% C.C.L.I. license number definition; for copyright licensing info.
% One of these macros will be manually inserted into the {CpyRt}
% parameter of the {song} environment.
%
%       \CCLInumber - The actual copyright license number.  Don't
%               insert this command in the {CpyRt} parameter, use one
%               of the others.
%       \CCLIed - Indicates a song falls under our CCLI license.
%       \NotCCLIed - Indicates a song doesn't fall under our CCLI
%               license.  Public Domain songs fall into this category.
%       \PGranted - We have received specific permission from the
%               copyright holder to use this song.
%       \PPending - We are in the process of obtaining permission to
%               use this song.
%%%
\newcommand{\CCLInumber}{Your CCLI Number}
\newcommand{\CCLIed}{{\CpyRtInfoFont (CCLI \CCLInumber)}}
\newcommand{\NotCCLIed}{\relax}
\newcommand{\PGranted}{\relax}
\newcommand{\PPending}{{\CpyRtInfoFont (Permission Pending)}}

%%%
% Title page information.
%%%
\title{Cuaderno de Cantos Infantiles}
\author{Ruslan L\'opez}
\date{\'Ultima Revisi\'on:  \RevDate}

%%%
% Redefine fonts from SongBook style that I don't like.
%%%
\font\myTinySF=cmss8 at 8pt
\renewcommand{\CpyRtInfoFont}{\tiny\myTinySF}

%%%
% Define fonts to use in the headers and footers of the songbook.
%%%
\newcommand{\LHeadFont}{\normalsize}            % = cmr12  at 12pt
\newcommand{\CHeadFont}{\normalsize\rm}         % = cmr12  at 12pt
\newcommand{\RHeadFont}{\normalsize}            % = cmr12  at 12pt
\newcommand{\LFootFont}{\scriptsize}            % = cmr8   at  8pt
\newcommand{\CFootFont}{\tiny\myTinySF}         % = cmss8  at  8pt
\newcommand{\RFootFont}{\scriptsize}            % = cmr8   at  8pt

%%%
% Turn on and define fancy page heading/footing definition.
%%%
\pagestyle{fancy}

\ifChordBk
% It's a words & chords songbook...
\headsep=7mm
\oddsidemargin=1in
\evensidemargin=1.2in
\footskip=0.2in
\addtolength{\headwidth}{\marginparsep}
\addtolength{\headwidth}{\marginparwidth}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
\fancyhead[LE,RO]{\LHeadFont\emph{\leftmark\/}\SBContinueMark}
\fancyhead[CE,CO]{\CHeadFont\thepage}
\fancyhead[RE,LO]{\RHeadFont\RelDate}
\else\ifOverhead
% It's an overhead...
\renewcommand{\footrulewidth}{0pt}
\renewcommand{\headrulewidth}{0pt}
\fancyhead[LE,RO]{}
\fancyhead[CE,CO]{}
\fancyhead[RE,LO]{}
\else\ifWordBk
% It's a words only songbook...
\addtolength{\headwidth}{\marginparsep}
\addtolength{\headwidth}{\marginparwidth}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
\fancyhead[LE,RO]{\LHeadFont Estribillero}
\fancyhead[CE,CO]{\CHeadFont\thepage}
\fancyhead[RE,LO]{\RHeadFont\RelDate}
\fi\fi\fi

\fancyfoot[LE,RO]{\LFootFont Transcripciones}
\ifSongEject
\fancyfoot[CE,CO]{\CFootFont \RevDate}
\else
\fancyfoot[CE,CO]{\CFootFont}
\fi
\fancyfoot[RE,LO]{\RFootFont Todo el material son transcripciones personales.}


% Document
\begin{document}
    \hypersetup{pageanchor=false}

%%%
% Custom titlepage for Christian church songbook
%%%
    \begin{titlepage}
        \thispdfpagelabel{Portada}
        \centering

        \vspace*{1cm}

        {\Huge\bfseries\sffamily{$\dagger$}\par}

        \vspace{1.5cm}

        {\Huge\bfseries\sffamily Cuaderno de\par}
        \vspace{0.5cm}
        {\Huge\bfseries\sffamily Cantos Infantiles\par}

        \vspace{2cm}

        \begin{center}
            \Large\itshape ``Cantad alegres a Dios, habitantes de toda la tierra.\\
            Servid a Jehov\'a con alegr\'ia;\\
            Venid ante su presencia con regocijo.''\\
            \vspace{0.3cm}
            --- Salmos 100:1-2
        \end{center}

        \vspace{2cm}

        {\Large\bfseries Compilado por:\par}
        \vspace{0.5cm}
        {\Large Ruslan L\'opez\par}

        \vfill

        {\large \'Ultima Revisi\'on: \RevDate\par}

        \vspace{1cm}

    \end{titlepage}

    \hypersetup{pageanchor=true}
    \pdfbookmark[0]{Piezas musicales}{piezas}
%    \mainmatter
    \ifWordBk
    \twocolumn
    \fi
%%%
% Songbook begins.
%%%

    \begin{song}{Una tortuguita}{C}
    {\SBPubDom} %copyright \SBPubDom
    {Dalberto Gomez Perez}
    {} %pasaje
    {} %\NotCCLIed
        \ifChordBk
        \paragraph{\mbox{}\hfill\protect\href{https://open.spotify.com/intl-es/track/0XgjeE9k0MrDisfz7PPtPf}{Escuchar}\mbox{}\hfill}
        \fi

        \begin{SBOpGroup}
            \Ch{C}{U}na tortuguita saca la cabeza

            es\Ch{G}{ti}ra sus manitas se le quita la pe\Ch{C}{re}za
        \end{SBOpGroup}

        \begin{SBOpGroup}
            \Ch{C}{Di}ce el perezoso, me duele la cabeza

            me \Ch{G}{due}le la cintura tengo ganas de \Ch{C}{dor}mir\Ch{C7}{}
        \end{SBOpGroup}

        \begin{SBChorus}
            \Ch{F}{Es} un buen ejemplo, \Ch{C}{pa}ra los cristianos

            \Ch{G}{que} de mala gana le \Ch{C}{sir}ven al Señor.
        \end{SBChorus}

        \begin{SBOpGroup}
            \Ch{C}{Eso} pasará cuando Cristo venga

            \Ch{G}{los} que estén dormidos aquí se queda\Ch{C}{rán}
        \end{SBOpGroup}

        \ifChordBk
        \begin{SBOpGroup}
            Acordes:
            \upchord{\C}{\qquad Do} Mayor  \hfill
            \upchord{\G}{\qquad Sol} Mayor \hfill\null\break
            \upchord{\Csmseven}{Do Sostenido} Menor S\'eptima \hfill
            \upchord{\F}{\qquad Fa} Mayor \hfill\null\break
        \end{SBOpGroup}
        \fi
    \end{song}

    \begin{song}{Zaqueo}{G}
    {} %copyright \SBPubDom
    {Manuel Bonilla}
    {} %pasaje
    {} %\NotCCLIed
        \ifChordBk
        \paragraph{\mbox{}\hfill\protect\href{https://open.spotify.com/intl-es/track/08vuoQqGMlE0HLEe1GG8ui}{Escuchar}\mbox{}\hfill}
        \fi

%  \SBRef{No puedo parar de alabarte}{2006}%fuente \#

        \begin{SBOpGroup}
Zaqueo era un chaparrito así


Que vivía en Jericó


Y cuando Jesús pasó por allí


A un sicomoro subió
        \end{SBOpGroup}

        \begin{SBChorus}
El Salvador le vio allí


Y le hablo así


Zaqueo, bájate de allí


Porque a tu casa voy a ir


A tu casa voy a ir
        \end{SBChorus}

        \begin{SBOpGroup}
Si tú también chiquitito estás


Y a Cristo quieres ver


Tú puedes hoy venir a Él


No hay nada que temer
        \end{SBOpGroup}

        \begin{SBOpGroup}
Decídete a invitarle hoy


Y dile al Salvador


Cristo, pasa por aquí


Porque contigo quiero ir


Que contigo quiero ir
        \end{SBOpGroup}

        \ifChordBk
        \begin{SBOpGroup}
            Acordes:
            \upchord{\Em}{\qquad Mi} Menor \hfill
            \upchord{\Bseven}{\qquad Si} S\'eptima \hfill\null\break
            \upchord{\C}{\qquad Do} Mayor \hfill
            \upchord{\D}{Re} Mayor \hfill\null\break
            \upchord{\G}{\qquad Sol} Mayor \hfill
            \upchord{\Am}{\qquad La} Menor \hfill\null\break
        \end{SBOpGroup}
        \fi
    \end{song}

    \ifChordBk
        \include{Pads}
        \theendnotes
        \include{Acordes}
        \include{infantilesAdx}
        \include{infantilesKdx}
    \fi

    \include{infantilesTdx}
\end{document}